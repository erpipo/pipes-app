<section class="mx-5 mb-5">
    <h1 class="text-4xl font-bold">Pipes personalizados</h1>
    <h3 class="text-xl">Pipes no incluidos en Angular</h3>
</section>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    <div class="stats shadow">
        <div class="stat">
            <div class="stat-title">ToggleCasePipe</div>
            <div class="stat-value">{{ name() | toggleCase: lowerUpper() }}</div>
            <div class="stat-desc">{{ name() }}</div>
            <button (click)="lowerUpper.set(!lowerUpper())" class="btn btn-accent my-4">Toggle</button>
        </div>
    </div>
</div>
<div class="divider"></div>

<section class="my-14">
    <h1 class="text-2xl font-bold text-center my-4"> Filtrando por: {{searchQuery()}} | Ordenando por: {{sortBy()}} </h1>
    <div class="flex gap-2 justify-center w-full">
        <input type="text"
        class="input input-bordered"
        placeholder="Buscar pájaro"
        (input)="searchQuery.set(txtSearch.value)"
        #txtSearch
        />
    </div>
    <div lass="flex gap-2 w-full">
        <button (click)="sortBy.set('canFly')" class="btn btn-secondary rounded-none">Por volador</button>
        <button (click)="sortBy.set('color')" class="btn btn-accent rounded-none">Por color</button>
        <button (click)="sortBy.set('name')" class="btn btn-primary rounded-none">Por nombre</button>
        <button (click)="sortBy.set('habitat')" class="btn btn-info rounded-none">Por hábitat</button>
    </div>
</section>

<div class="overflow-x-auto w-full m-4">
    <table class="table table-xs w-full">
        <thead>
            <tr class="text-center">
                <th class="text-2xl">#</th>
                <th class="text-2xl">Nombre</th>
                <th class="text-2xl">¿Puede volar?</th>
                <th class="text-2xl">Color</th>
                <th class="text-2xl">Hábitat</th>
            </tr>
        </thead>
        <tbody class="text-center">
            @for (bird of birds() | birdFilter:searchQuery() | birdSort:sortBy(); track bird.id; let i = $index) {
            <tr>
                <th>{{ i + 1 }}</th>
                <td>{{ bird.name }}</td>
                <td>
                    <span [class.text-success]="bird.canFly" [class.text-red-600]="!bird.canFly">
                        {{ bird.canFly | canFly }}
                    </span>
                </td>
                <td>
                    <div
                    class="badge border-2 rounded-2xl border-solid w-15 justify-center"
                    [style.backgroundColor]="bird.color | birdColor"
                    [style.borderColor]="bird.color | birdColor">
                       {{ bird.color | birdColor | titlecase }}
                    </div>
                </td>
                <td>
                    <span>
                        {{ bird.habitat | birdHabitat }}
                    </span>
                </td>
            </tr>
            }
    </table>
</div>